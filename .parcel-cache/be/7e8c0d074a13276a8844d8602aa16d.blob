var helpers = require("../../../../../../.nvm/versions/node/v14.16.1/lib/node_modules/parcel/node_modules/@parcel/transformer-react-refresh-wrap/lib/helpers/helpers.js");
var prevRefreshReg = window.$RefreshReg$;
var prevRefreshSig = window.$RefreshSig$;
helpers.prelude(module);
try {
  var _parcelHelpers = require("@parcel/transformer-js/lib/esmodule-helpers.js");
  _parcelHelpers.defineInteropFlag(exports);
  _parcelHelpers.export(exports, "ProfileView", function () {
    return ProfileView;
  });
  var _react = require('react');
  var _reactDefault = _parcelHelpers.interopDefault(_react);
  var _reactBootstrapButton = require('react-bootstrap/Button');
  var _reactBootstrapButtonDefault = _parcelHelpers.interopDefault(_reactBootstrapButton);
  var _propTypes = require('prop-types');
  var _propTypesDefault = _parcelHelpers.interopDefault(_propTypes);
  var _axios = require('axios');
  var _axiosDefault = _parcelHelpers.interopDefault(_axios);
  var _reactRouterDom = require("react-router-dom");
  require('./profile-view.scss');
  var _jsxFileName = "/Users/yaya/Desktop/CF/myFlix-client/src/components/profile-view/profile-view.jsx";
  class ProfileView extends _reactDefault.default.Component {
    render() {
      let {user, token, history, userData, onNewUser, onSignOut} = this.props;
      function updateInfo(token) {
        const userInput = document.getElementById('username');
        const passInput = document.getElementById('password');
        const passVerInput = document.getElementById('passwordVer');
        const emailInput = document.getElementById('email');
        const dateInput = document.getElementById('DOB');
        if (userInput.value.length > 12) {
          const userErr = document.getElementById('user');
          return userErr.innerText = "Username can only be 12 characters";
        }
        const nameChoice = userInput.value || userData.Username;
        let passChoice = null;
        if (passInput.value == "") {
          passChoice = "";
        } else {
          passChoice = passInput.value;
        }
        const emailChoice = emailInput.value || userData.Email;
        const dateChoice = dateInput.value || userData.DOB;
        if (passInput.value === passVerInput.value) {
          _axiosDefault.default.put(`https://movieapi-yayacdm.herokuapp.com/users/${user}`, {
            Username: nameChoice,
            Password: passChoice,
            Email: emailChoice,
            DOB: dateChoice
          }, {
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${token}`
            }
          }).then(response => {
            console.log('Success with updating account information');
            let userData2 = response.data;
            onNewUser(userData2);
            if (userInput.value != "") {
              window.location = `/users/${userData2.Username}`;
            }
            if (passChoice != "") {
              window.location = `/users/${userData2.Username}`;
            }
          }).catch(function (error) {
            console.log(error);
          });
        } else {
          const passErr = document.getElementById('pass');
          const passErrVer = document.getElementById('passVer');
          passErr.innerText = "The passwords must match";
          passErrVer.innerText = "The passwords must match";
        }
      }
      function deleteAcc(token) {
        console.log('Not deleted yet');
        _axiosDefault.default.delete(`https://movieapi-yayacdm.herokuapp.com/users${user}`, {
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
          }
        }).then(response => {
          console.log(response);
          console.log(`${user} has been deleted`);
        }).catch(e => {
          console.log('There is an error');
          console.log(e);
        });
      }
      function Date() {
        const formDate = userData.DOB;
        return formDate.slice(0, 10);
      }
      if (userData.Username === 'testuser') {
        return (
          /*#__PURE__*/_reactDefault.default.createElement(_reactDefault.default.Fragment, null, /*#__PURE__*/_reactDefault.default.createElement("div", {
            className: "centerProfile",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 89,
              columnNumber: 11
            }
          }, /*#__PURE__*/_reactDefault.default.createElement("h1", {
            className: "title my-4",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 90,
              columnNumber: 13
            }
          }, "Hello ", `${userData.Username}`, ","), /*#__PURE__*/_reactDefault.default.createElement("h2", {
            className: "title-2 my-4",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 91,
              columnNumber: 13
            }
          }, "Current Information"), /*#__PURE__*/_reactDefault.default.createElement("div", {
            className: "align-text-left",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 92,
              columnNumber: 13
            }
          }, /*#__PURE__*/_reactDefault.default.createElement("div", {
            className: " my-2",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 93,
              columnNumber: 15
            }
          }, /*#__PURE__*/_reactDefault.default.createElement("strong", {
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 93,
              columnNumber: 38
            }
          }, "Username:"), " ", `${userData.Username}`), /*#__PURE__*/_reactDefault.default.createElement("div", {
            className: " my-2",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 94,
              columnNumber: 15
            }
          }, /*#__PURE__*/_reactDefault.default.createElement("strong", {
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 94,
              columnNumber: 38
            }
          }, "Email:"), " ", `${userData.Email}`), /*#__PURE__*/_reactDefault.default.createElement("div", {
            className: " my-2",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 95,
              columnNumber: 15
            }
          }, /*#__PURE__*/_reactDefault.default.createElement("strong", {
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 95,
              columnNumber: 38
            }
          }, "Date of Birth:"), " ", `${Date()}`)), /*#__PURE__*/_reactDefault.default.createElement("h2", {
            className: "title-2 my-4",
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 97,
              columnNumber: 13
            }
          }, "Update Information"), /*#__PURE__*/_reactDefault.default.createElement("div", {
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 98,
              columnNumber: 13
            }
          }, "The testuser account info cannot be updated!")))
        );
      }
      return (
        /*#__PURE__*/_reactDefault.default.createElement(_reactDefault.default.Fragment, null, /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "centerProfile",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 105,
            columnNumber: 9
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("h1", {
          className: "title my-4",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 106,
            columnNumber: 11
          }
        }, "Hello ", `${userData.Username}`, ","), /*#__PURE__*/_reactDefault.default.createElement("h2", {
          className: "title-2 my-4",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 107,
            columnNumber: 11
          }
        }, "Current Information"), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "align-text-left",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 108,
            columnNumber: 11
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: " my-2",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 109,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("strong", {
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 109,
            columnNumber: 36
          }
        }, "Username:"), " ", `${userData.Username}`), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: " my-2",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 110,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("strong", {
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 110,
            columnNumber: 36
          }
        }, "Email:"), " ", `${userData.Email}`), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: " my-2",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 111,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("strong", {
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 111,
            columnNumber: 36
          }
        }, "Date of Birth:"), " ", `${Date()}`)), /*#__PURE__*/_reactDefault.default.createElement("h2", {
          className: "title-2 my-4",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 113,
            columnNumber: 11
          }
        }, "Update Information"), /*#__PURE__*/_reactDefault.default.createElement("form", {
          noValidate: true,
          className: "form",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 114,
            columnNumber: 11
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "input-wrap",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 116,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("label", {
          htmlFor: "username",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 117,
            columnNumber: 15
          }
        }, "Username:"), /*#__PURE__*/_reactDefault.default.createElement("input", {
          type: "text",
          id: "username",
          placeholder: "New Username",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 118,
            columnNumber: 15
          }
        }), /*#__PURE__*/_reactDefault.default.createElement("div", {
          id: "user",
          className: "error",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 119,
            columnNumber: 15
          }
        })), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "input-wrap",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 122,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("label", {
          htmlFor: "password",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 123,
            columnNumber: 15
          }
        }, "Password:"), /*#__PURE__*/_reactDefault.default.createElement("input", {
          id: "password",
          type: "password",
          placeholder: "New Password",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 124,
            columnNumber: 15
          }
        }), /*#__PURE__*/_reactDefault.default.createElement("div", {
          id: "pass",
          className: "error",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 125,
            columnNumber: 15
          }
        })), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "input-wrap",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 128,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("label", {
          htmlFor: "password Verification",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 129,
            columnNumber: 15
          }
        }, "Verify Password:"), /*#__PURE__*/_reactDefault.default.createElement("input", {
          id: "passwordVer",
          type: "password",
          placeholder: "Verify Password Change",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 130,
            columnNumber: 15
          }
        }), /*#__PURE__*/_reactDefault.default.createElement("div", {
          id: "passVer",
          className: "error",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 131,
            columnNumber: 15
          }
        })), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "input-wrap",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 134,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("label", {
          htmlFor: "email",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 135,
            columnNumber: 15
          }
        }, "Email:"), /*#__PURE__*/_reactDefault.default.createElement("input", {
          id: "email",
          type: "email",
          placeholder: "New Email",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 136,
            columnNumber: 15
          }
        }), /*#__PURE__*/_reactDefault.default.createElement("div", {
          id: "email-err",
          className: "error",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 137,
            columnNumber: 15
          }
        })), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "input-wrap",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 140,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement("label", {
          htmlFor: "DOB",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 141,
            columnNumber: 15
          }
        }, "Date of Birth:"), /*#__PURE__*/_reactDefault.default.createElement("input", {
          id: "DOB",
          type: "Date",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 142,
            columnNumber: 15
          }
        }), /*#__PURE__*/_reactDefault.default.createElement("div", {
          id: "Date",
          className: "error",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 143,
            columnNumber: 15
          }
        })), /*#__PURE__*/_reactDefault.default.createElement("div", {
          className: "middle",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 146,
            columnNumber: 13
          }
        }, /*#__PURE__*/_reactDefault.default.createElement(_reactBootstrapButtonDefault.default, {
          className: "m-3 bttn",
          variant: "info",
          type: "button",
          onClick: () => {
            updateInfo(token);
          },
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 147,
            columnNumber: 15
          }
        }, "Update"), /*#__PURE__*/_reactDefault.default.createElement(_reactRouterDom.Link, {
          to: `/`,
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 148,
            columnNumber: 15
          }
        }, /*#__PURE__*/_reactDefault.default.createElement(_reactBootstrapButtonDefault.default, {
          className: "m-3 bttn",
          variant: "info",
          type: "button",
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 149,
            columnNumber: 17
          }
        }, "Go Back")), /*#__PURE__*/_reactDefault.default.createElement(_reactBootstrapButtonDefault.default, {
          className: "m-3 bttn",
          variant: "info",
          type: "button",
          onClick: () => {
            deleteAcc(token);
            onSignOut(null);
            history.push('/');
          },
          __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 151,
            columnNumber: 15
          }
        }, "Delete Account")))))
      );
    }
  }
  ProfileView.PropTypes = {
    movies: _propTypesDefault.default.array.isRequired
  };
  helpers.postlude(module);
} finally {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
